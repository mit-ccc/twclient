<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>README &mdash; twclient 0.2.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="../_static/jquery.js"></script>
        <script integrity="sha384-lSZeSIVKp9myfKbDQ3GkN/KHjUc+mzg17VKDN4Y2kUeBSJioB9QSM639vM9fuY//" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Twclient Documentation" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            twclient
          </a>
              <div class="version">
                0.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#twclient">twclient</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-use-this-project">Why use this project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-database">Setup: Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-twitter">Setup: Twitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pulling-data">Pulling data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exporting-data">Exporting data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#feedback-or-contributions">Feedback or Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Apache License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vignettes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vignettes/fetch.html">Getting data from the Twitter API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vignettes/export.html">Working with fetched data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidocs.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">twclient</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">README</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/overview/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="readme">
<h1>README<a class="headerlink" href="#readme" title="Permalink to this heading"></a></h1>
<a class="reference external image-reference" href="https://www.apache.org/licenses/LICENSE-2.0"><img alt="Apache 2.0 License" src="https://img.shields.io/badge/License-Apache_2.0-blue.svg" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/twclient/"><img alt="PyPi version" src="https://badge.fury.io/py/twclient.svg" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/twclient/"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/twclient.svg" /></a>
<section id="twclient">
<h2>twclient<a class="headerlink" href="#twclient" title="Permalink to this heading"></a></h2>
<p>This package provides a high-level command-line client for the Twitter API,
with a focus on loading data into a database for analysis or bulk use.</p>
</section>
<section id="why-use-this-project">
<h2>Why use this project?<a class="headerlink" href="#why-use-this-project" title="Permalink to this heading"></a></h2>
<p>This project offers high-level primitives for researchers who want to get
data out of Twitter, without worrying about the API details. The client can
handle multiple sets of API credentials seamlessly, helping avoid rate limit
issues. <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> There’s also support for exporting bulk datasets from the fetched
raw data.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>Install the package from pypi:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>twclient
</pre></div>
</div>
<p>or, if you want to use the development version, clone this repo and install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:mit-ccc/twclient.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>twclient
pip3<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">-e</span></code> flag to install in editable mode:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p>To install all development dependencies, replace <code class="docutils literal notranslate"><span class="pre">.</span></code> with <code class="docutils literal notranslate"><span class="pre">.[dev]</span></code> in the
arguments to <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span></code>.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>First, you need to tell twclient about your database backend and Twitter
credentials. On the database side, we’ve only tested with Postgres and SQLite.
While the package may well work with other DB engines, be aware that you may
encounter issues.</p>
<section id="setup-database">
<h3>Setup: Database<a class="headerlink" href="#setup-database" title="Permalink to this heading"></a></h3>
<p>The database backend can be either sqlite or an arbitrary database
specified by a sqlalchemy connection string.</p>
<p>You can set up the database in one of two ways. Both create a persistent
profile in your <code class="docutils literal notranslate"><span class="pre">.twclientrc</span></code> file (or whatever other file you specify), so
there’s no need to type the database details repeatedly.</p>
<p>First, you can specify the DB with a sqlalchemy connection URL:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Postgres -- this becomes the default DB because you&#39;ve created it first</span>
twclient<span class="w"> </span>config<span class="w"> </span>add-db<span class="w"> </span>-u<span class="w"> </span><span class="s2">&quot;postgresql+psycopg2://username@hostname:5432/dbname&quot;</span><span class="w"> </span>my_postgres_db

<span class="c1"># Or you could use SQLite</span>
twclient<span class="w"> </span>config<span class="w"> </span>add-db<span class="w"> </span>-u<span class="w"> </span><span class="s2">&quot;sqlite:///home/user/twitter.db&quot;</span><span class="w"> </span>my_sqlite_db
</pre></div>
</div>
<p>There’s also support for using SQLite without having to think about sqlalchemy
and connection URLs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>config<span class="w"> </span>add-db<span class="w"> </span>-f<span class="w"> </span>./twitter2.db<span class="w"> </span>my_sqlite_db2
</pre></div>
</div>
<p>If you specify a file-backed sqlite DB, as in the examples above, it’ll be
created if it doesn’t exist. Other databases (Postgres, for example) will need
to be set up separately.</p>
<p>Finally, you have to install our database schema into your database to receive
Twitter data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># You have to specify the -y to say you&#39;re aware all data will be dropped</span>
twclient<span class="w"> </span>initialize<span class="w"> </span>-d<span class="w"> </span>my_postgres_db<span class="w"> </span>-y
</pre></div>
</div>
<p>Be aware that doing this will <strong>DROP ALL EXISTING TWCLIENT DATA</strong>!!! (Or other
tables with the same names.) If you’re not just getting started, check to make
sure you’re using a new or empty database, don’t care about the contents,
and/or have backups before running this.</p>
</section>
<section id="setup-twitter">
<h3>Setup: Twitter<a class="headerlink" href="#setup-twitter" title="Permalink to this heading"></a></h3>
<p>You’ll also need to set up your Twitter API credentials. <a class="footnote-reference brackets" href="#id3" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> As with the
database setup, doing this stores the credentials in a config file (the same
config file as for database info) for ease of use. Only two sets of credentials
are shown, but you can add as many as you want.</p>
<p>Here’s an example of adding two API keys:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>config<span class="w"> </span>add-api<span class="w"> </span>-n<span class="w"> </span>twitter1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-key<span class="w"> </span>XXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-secret<span class="w"> </span>XXXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--token<span class="w"> </span>XXXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--token-secret<span class="w"> </span>XXXXXX

twclient<span class="w"> </span>config<span class="w"> </span>add-api<span class="w"> </span>-n<span class="w"> </span>twitter2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-key<span class="w"> </span>XXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-secret<span class="w"> </span>XXXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--token<span class="w"> </span>XXXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--token-secret<span class="w"> </span>XXXXXX
</pre></div>
</div>
<p>Here’s an example of adding credentials that use <a class="reference external" href="https://developer.twitter.com/en/docs/authentication/oauth-2-0/application-only">app-only auth</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>config<span class="w"> </span>add-api<span class="w"> </span>-n<span class="w"> </span>twitter3<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-key<span class="w"> </span>XXXXX<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--consumer-secret<span class="w"> </span>XXXXXX
</pre></div>
</div>
</section>
<section id="pulling-data">
<h3>Pulling data<a class="headerlink" href="#pulling-data" title="Permalink to this heading"></a></h3>
<p>To actually pull data, use the <code class="docutils literal notranslate"><span class="pre">twclient</span> <span class="pre">fetch</span></code> command. We’ll pull
information about three specific users and a Twitter list here. Note that you
can refer to lists either by their “slug” (username/listname) or by the ID at
the end of a URL of the form <cite>https://twitter.com/i/lists/53603015</cite>.</p>
<p>First, let’s load some users and their basic info:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># you could instead also end this with &quot;-l 53603015&quot;; it&#39;s the same list</span>
twclient<span class="w"> </span>fetch<span class="w"> </span>users<span class="w"> </span>-n<span class="w"> </span>wwbrannon<span class="w"> </span>CCCatMIT<span class="w"> </span>MIT<span class="w"> </span>-l<span class="w"> </span>MIT/peers1
</pre></div>
</div>
<p>Now, to save typing, let’s use the <code class="docutils literal notranslate"><span class="pre">twclient</span> <span class="pre">tag</span></code> command to apply a tag we
can use to keep track of these users later:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>tag<span class="w"> </span>create<span class="w"> </span>subjects
twclient<span class="w"> </span>tag<span class="w"> </span>apply<span class="w"> </span>subjects<span class="w"> </span>-n<span class="w"> </span>wwbrannon<span class="w"> </span>CCCatMIT<span class="w"> </span>MIT<span class="w"> </span>-l<span class="w"> </span>MIT/peers1
</pre></div>
</div>
<p>We can now use this tag in specifying users, such as which users we’d like to
fetch tweets for:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>fetch<span class="w"> </span>tweets<span class="w"> </span>-g<span class="w"> </span>subjects
</pre></div>
</div>
<p>And if we also want their follow-graph info (note that a “friend” is Twitter’s
term for a follow-ee, an account you follow):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span>fetch<span class="w"> </span>friends<span class="w"> </span>-g<span class="w"> </span>subjects
twclient<span class="w"> </span>fetch<span class="w"> </span>followers<span class="w"> </span>-g<span class="w"> </span>subjects
</pre></div>
</div>
<p>At this point, the loaded data is in the database configured with <code class="docutils literal notranslate"><span class="pre">config</span>
<span class="pre">add-db</span></code>. Useful features have been normalized out to save processing time. The
raw API responses are also saved for later analysis.</p>
</section>
<section id="exporting-data">
<h3>Exporting data<a class="headerlink" href="#exporting-data" title="Permalink to this heading"></a></h3>
<p>You can query the data with the usual database tools (<code class="docutils literal notranslate"><span class="pre">psql</span></code> for postgres,
<code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> for sqlite, ODBC clients, etc.) or export certain pre-defined bulk
datasets with the <code class="docutils literal notranslate"><span class="pre">twclient</span> <span class="pre">export</span></code> command. For example, here are the follow
graph and mention graph over users:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span><span class="nb">export</span><span class="w"> </span>follow-graph<span class="w"> </span>-o<span class="w"> </span>follow-graph.csv
twclient<span class="w"> </span><span class="nb">export</span><span class="w"> </span>mention-graph<span class="w"> </span>-o<span class="w"> </span>mention-graph.csv
</pre></div>
</div>
<p>If you want to restrict the export to only the users specified above:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twclient<span class="w"> </span><span class="nb">export</span><span class="w"> </span>follow-graph<span class="w"> </span>-g<span class="w"> </span>subjects<span class="w"> </span>-o<span class="w"> </span>follow-graph.csv
twclient<span class="w"> </span><span class="nb">export</span><span class="w"> </span>mention-graph<span class="w"> </span>-g<span class="w"> </span>subjects<span class="w"> </span>-o<span class="w"> </span>mention-graph.csv
</pre></div>
</div>
<p>For other exports and other options, see the documentation.</p>
</section>
</section>
<section id="feedback-or-contributions">
<h2>Feedback or Contributions<a class="headerlink" href="#feedback-or-contributions" title="Permalink to this heading"></a></h2>
<p>If you come across a bug, please report it on the Github issue tracker. If you
want to contribute, reach out! Extensions and improvements are welcome.</p>
</section>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Permalink to this heading"></a></h2>
<p>Copyright © 2019-2023 Massachusetts Institute of Technology.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>)</span>
<p>Of course, you’ll need to make sure you have the right to use all of
your credentials and are complying with Twitter’s terms of use.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Twclient Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2021, Massachusetts Institute of Technology.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>